# **Задание:**

Реализовать простую реферальную систему. Минимальный интерфейс для тестирования

**Реализовать логику и API для следующего функционала :**

- Авторизация по номеру телефона. Первый запрос на ввод номера телефона. Имитировать отправку 4хзначного кода авторизации(задержку на сервере 1-2 сек). Второй запрос на ввод кода.

> Рассмотрены 2 варианта сохранения сгенерированного смс кода для сверки с введенным пользователем:
> 1) Сохранение кода в таблице БД с дополнительным полем временем создания и временем жизни. 
> Защита высокая, так как сгенерированный код никуда не передается, а хранится на сервере.
> Возникает необходимость в периодической очистке БД от просроченных кодов, например крон задачей.
> 2) Генерация токена с передачей его пользователю и последующего использования токена в хедере, либо теле запроса.
> Использование обычных JWT токенов имеет очень низкую защиту, тк при его перехвате полезная информация легко читается.
> Для этих целей можно использовать шифрование токена, так называемый JWE (encrypted) токен. 
> Шифрование производится с помощью секретного ключа, он же служит для дешифрации. Для дополнительной защиты JWE можно
> подсолить (+salt). При использовании JWE токенов отпадает необходимость использования базы данных для хранения смс кодов
> и периодической ее очистке.

> Выбран вариант с JWE токеном.

> Авторизация происходит посредством выдачи JWT токена. Для этого использована библиотека simpleJWT
- Если пользователь ранее не авторизовывался, то записать его в бд
> Новый пользователь создается после верификации смс кода
- Запрос на профиль пользователя
> В профиле пользователя доступны GET, PUT, PATCH, DELETE запросы
- Пользователю нужно при первой авторизации нужно присвоить рандомно сгенерированный 6-значный инвайт-код(цифры и символы)
> При создании нового пользователя генерируется уникальный (уникальность проверяется) 6-значный буквенно-числовой код.
- В профиле у пользователя должна быть возможность ввести чужой инвайт-код(при вводе проверять на существование). В своем профиле можно активировать только 1 инвайт код, если пользователь уже когда-то активировал инвайт код, то нужно выводить его в соответсвующем поле в запросе на профиль пользователя
> Реализован эндпоинт для ввода чужого реферального кода с соответствующими проверками.
- В API профиля должен выводиться список пользователей(номеров телефона), которые ввели инвайт код текущего пользователя.
- Реализовать и описать в readme Api для всего функционала
- Создать и прислать Postman коллекцию со всеми запросами
- Залить в сеть, чтобы удобнее было тестировать(например бесплатно на [https://www.pythonanywhere.com](https://www.pythonanywhere.com/) или heroku)